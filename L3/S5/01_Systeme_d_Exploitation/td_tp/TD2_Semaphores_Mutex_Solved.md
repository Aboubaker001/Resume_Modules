<div dir="rtl" align="right">

# TD 2: ุงูุชุฒุงูู ูุงูุณููุงููุฑุงุช (Synchronisation & Sรฉmaphores) - ูุณุฎุฉ ูุนููุฉ

ุชูุงุฑูู ุญูู ููููุฉ ุงุณุชุฎุฏุงู ุงูุณููุงููุฑุงุช ูุญู ูุดุงูู ุงูุชุฒุงูู ุงูููุงุณูููุฉ ุจุฃุณููุจ ุงูุชุญุงูู.

---

## ุงูุชูุฑูู ุงูุฃูู: ูุดููุฉ ุงููุฑุงุก ูุงููุชุงุจ (Lecteurs/Rรฉdacteurs)

**ุงูุณุคุงู:** ูุฏููุง ูุงุนุฏุฉ ุจูุงูุงุช ูุดุชุฑูุฉ. ูููู ูุนุฏุฉ ูุฑุงุก ุงููุฑุงุกุฉ ูู ููุณ ุงูููุชุ ูููู ุฅุฐุง ุฃุฑุงุฏ ูุงุชุจ ุงููุชุงุจุฉุ ูุฌุจ ุฃู ูููู ูุญุฏู.
ุฃููู ุงูููุฏ ุงูุชุงูู ุจุงุณุชุฎุฏุงู ุงูุณููุงููุฑุงุช:

```c
Semaphore mutex = 1; // ูุญูุงูุฉ ุงููุชุบูุฑ readcount
Semaphore db = 1;    // ูุญูุงูุฉ ุงููุตูู ููุงุนุฏุฉ ุงูุจูุงูุงุช
int readcount = 0;   // ุนุฏุฏ ุงููุฑุงุก ุงูุญุงูููู

Rรฉdacteur:
  wait(db);
  // ุงููุชุงุจุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
  signal(db);

Lecteur:
  wait(mutex);
  readcount++;
  if (readcount == 1) wait(db); // ุฃูู ูุงุฑุฆ ูุญุฌุฒ ุงููุงุนุฏุฉ
  signal(mutex);
  
  // ุงููุฑุงุกุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
  
  wait(mutex);
  readcount--;
  if (readcount == 0) signal(db); // ุขุฎุฑ ูุงุฑุฆ ูุญุฑุฑ ุงููุงุนุฏุฉ
  signal(mutex);
```

**ุงููุทููุจ:** 
1. ุงุดุฑุญ ุฏูุฑ ุงููุชุบูุฑ `readcount`.
2. ูุงุฐุง ูุญุฏุซ ูู ุญุงูู ูุงุชุจ ุงูุฏุฎูู ูููุงู 3 ูุฑุงุก ุจุงูุฏุงุฎูุ

**ุงูุญู:**
1. **readcount:** ูุชุบูุฑ ูุดุชุฑู ูุญุณุจ ุนุฏุฏ ุงููุฑุงุก ุงููุดุทูู. ูุญุชุงุฌ ูุญูุงูุชู ุจู `mutex` ูุฃู ุนุฏุฉ ูุฑุงุก ูุฏ ูุญุงูููู ุชุนุฏููู ูู ููุณ ุงูููุช.
2. **ุงูุณููุงุฑูู:** ุงููุงุชุจ ุณูููุฐ `wait(db)`. ุจูุง ุฃู ุฃูู ูุงุฑุฆ ูุฏ ููุฐ `wait(db)` ูุณุจูุงูุ ูุฅู ูููุฉ `db` ูู 0. ุงููุงุชุจ ุณูุจูู ูู ุญุงูุฉ **Blocked** ุญุชู ูุฎุฑุฌ ุขุฎุฑ ูุงุฑุฆ ููููุฐ `signal(db)`.

---

## ุงูุชูุฑูู ุงูุซุงูู: ูุดููุฉ ุงูููุชุฌ ูุงููุณุชููู (Buffer Limited)

**ุงูุณุคุงู:** ูุฏููุง ูุฎุฒู (Buffer) ูุชุณุน ูู 5 ุนูุงุตุฑ. ุงูููุชุฌ ูุถุน ุนูุตุฑุงู ูุงููุณุชููู ูุฃุฎุฐ ุนูุตุฑุงู.
ุงูุชุจ ุงูุฎูุงุฑุฒููุฉ ุจุงุณุชุฎุฏุงู ุงูุณููุงููุฑุงุช ูุน ุดุฑุญ ุฏูุฑ ูู ุณููุงููุฑ.

**ุงูุญู:**
```c
Semaphore mutex = 1; // ูุถูู ุฃู ุนูููุฉ ูุงุญุฏุฉ ููุท ุชุนุฏู ูู ุงููุฎุฒู
Semaphore empty = 5; // ูุญุณุจ ุงูุฃูุงูู ุงููุงุฑุบุฉ (ูุจุฏุฃ ุจู 5)
Semaphore full = 0;  // ูุญุณุจ ุงูุนูุงุตุฑ ุงูููุฌูุฏุฉ (ูุจุฏุฃ ุจู 0)

Producteur:
  wait(empty); // ูู ููุฌุฏ ููุงูุ
  wait(mutex); // ุงุญุฌุฒ ุงููุฎุฒู
  // ุฅุถุงูุฉ ุนูุตุฑ
  signal(mutex);
  signal(full); // ุฃุนูู ุงููุณุชููู ุจูุฌูุฏ ุนูุตุฑ ุฌุฏูุฏ

Consommateur:
  wait(full);  // ูู ููุฌุฏ ุนูุตุฑุ
  wait(mutex); // ุงุญุฌุฒ ุงููุฎุฒู
  // ุฃุฎุฐ ุนูุตุฑ
  signal(mutex);
  signal(empty); // ุฃุนูู ุงูููุชุฌ ุจูุฌูุฏ ููุงู ูุงุฑุบ
```

---

## ุงูุชูุฑูู ุงูุซุงูุซ: ุณููุงุฑูู ุงูุฌุณุฑ (The Bridge)

**ุงูุณุคุงู:** ุฌุณุฑ ูุฑุจุท ุจูู ุถูุชููุ ูุง ูููู ูุฃูุซุฑ ูู ุณูุงุฑุชูู ุงููุฑูุฑ ุนููู ูู ููุณ ุงูููุช.
1. ุงูุชุฑุญ ุญูุงู ุจุงุณุชุฎุฏุงู ุงูุณููุงููุฑุงุช.
2. ูุงุฐุง ูู ุฃุฑุฏูุง ุฅุถุงูุฉ ุดุฑุท ุฃู ุงูุณูุงุฑุงุช ูู ููุณ ุงูุงุชุฌุงู ููุท ูููููุง ุงููุฑูุฑ ูุนุงูุ (ุชูููุญ: ุชุดุจู ูุดููุฉ ุงููุฑุงุก ูุงููุชุงุจ).

**ุงูุญู:**
1. **ุงูุญู ุงูุจุณูุท:** ูุณุชุฎุฏู **Counting Semaphore** ูููุชู ุงูุงุจุชุฏุงุฆูุฉ 2.
   ```c
   wait(bridge_limit); // ุงููููุฉ ุงูุงุจุชุฏุงุฆูุฉ 2
   // ุนุจูุฑ ุงูุฌุณุฑ
   signal(bridge_limit);
   ```
2. **ุงูุญู ุงููุชูุฏู:** ูุนุชุจุฑ ูู ุงุชุฌุงู ูุฃูู "ูุงุฑุฆ". ุงูุณูุงุฑุงุช ูู ุงูุงุชุฌุงู A ูููููุง ุงููุฑูุฑ ูุนุงู (ุญุชู ุญุฏ ูุนูู)ุ ููููุง ุชููุน ุงูุณูุงุฑุงุช ูู ุงูุงุชุฌุงู B (ุงููุงุชุจ).

---

## ๐ ููุงุท ููููุฉ ููุงูุชุญุงู
- **ุงูุชุฑุชูุจ ููู:** ุฏุงุฆูุงู ููุฐ `wait(empty/full)` ูุจู `wait(mutex)`. ุฅุฐุง ุนูุณุช ุงูุชุฑุชูุจุ ูุฏ ูุญุฏุซ **Deadlock** (ุงูููุชุฌ ูุญุฌุฒ ุงููุฎุฒู ุซู ูุฌุฏ ุฃูู ููุชูุฆ ูููุชุธุฑุ ูุงููุณุชููู ูุง ููููู ุงูุฏุฎูู ูููุฑุบ ุงููุฎุฒู ูุฃู ุงูููุชุฌ ูุญุฌุฒู!).
- **ุงูุฐุฑูุฉ (Atomicity):** ุนูููุงุช ุงูุณููุงููุฑ ูุง ุชูุจู ุงูุชุฌุฒุฆุฉ.

</div>
