<div dir="rtl" align="right">

# 07. الذاكرة الافتراضية (Mémoire Virtuelle)

### 1️⃣ ملخص الفكرة
الذاكرة الافتراضية هي تقنية تسمح بتنفيذ عمليات لا توجد بالكامل في الذاكرة الحية (RAM). هذا يسمح بتشغيل برامج أكبر من حجم RAM المتوفر، وذلك باستخدام جزء من القرص الصلب كملحق للذاكرة.

---

### 2️⃣ شرح مفصل ومبسط

#### الطلب عند الحاجة (Demand Paging):
لا يتم تحميل الصفحة في RAM إلا عندما تحتاجها العملية.
- **Valid/Invalid Bit:** بت في جدول الصفحات يشير هل الصفحة موجودة في RAM أم لا.
- **Défaut de Page (Page Fault):** يحدث عندما تحاول العملية الوصول لصفحة غير موجودة في RAM.

#### خطوات معالجة Page Fault:
1. التحقق من صحة الطلب.
2. إيجاد إطار (Frame) فارغ في RAM.
3. قراءة الصفحة من القرص إلى الإطار.
4. تحديث جدول الصفحات.
5. إعادة تنفيذ التعليمة التي تسببت في الخطأ.

#### خوارزميات استبدال الصفحات:
عندما تمتلئ RAM، يجب اختيار صفحة لحذفها:
- **FIFO:** أول صفحة دخلت هي أول من يخرج.
- **LRU (Least Recently Used):** استبدال الصفحة التي لم تُستخدم لأطول فترة زمنية في الماضي.
- **Optimal:** استبدال الصفحة التي لن تُستخدم لأطول فترة في المستقبل (مستحيل تطبيقياً).

---

### 3️⃣ ظاهرة بيلادي (Anomalie de Belady)

تحدث في خوارزمية **FIFO**، حيث يزيد عدد أخطاء الصفحات (Page Faults) عند زيادة عدد الإطارات (Frames) المتاحة، وهو أمر غير منطقي لكنه يحدث في حالات معينة.

---

### 4️⃣ أمثلة تطبيقية
تخيل أن لديك RAM سعتها 3 إطارات، والعمليات تطلب الصفحات: `1, 2, 3, 4, 1, 2`.
- **FIFO:** ستحدث أخطاء كثيرة لأن الصفحة 1 ستخرج لتدخل 4، ثم نحتاجها مرة أخرى.
- **LRU:** سيحاول الاحتفاظ بالصفحات التي استُخدمت مؤخراً.

---

### 5️⃣ نقاط مهمة للحفظ (Exam Tips)
- **Thrashing (Ecroulement):** حالة يقضي فيها النظام وقته في تبديل الصفحات بدلاً من تنفيذ العمليات (بسبب نقص RAM الشديد).
- **Dirty Bit:** يستخدم لتجنب كتابة الصفحة في القرص إذا لم يتم تعديلها في RAM.

---

### 6️⃣ تمرين امتحاني
**سؤال:** لماذا تعتبر خوارزمية LRU أفضل من FIFO في معظم الحالات؟

**تلميح للحل:** لأن LRU تعتمد على مبدأ "المحلية الزمنية" (Temporal Locality)، حيث أن الصفحة التي استُخدمت مؤخراً من المرجح جداً أن تُستخدم مرة أخرى قريباً.

</div>
