<div dir="rtl" align="right">

# 04. ุงูุชุฒุงูู (Synchronisation): ุงูุณููุงููุฑุงุชุ ุงููุชุบูุฑุงุชุ ูุงููุฑุงูุจูู

### 1๏ธโฃ ููุฎุต ุงูููุฑุฉ
ุงูุชุฒุงูู ูู ุชูุธูู ุงููุตูู ููููุงุฑุฏ ุงููุดุชุฑูุฉ ูููุน ุชุถุงุฑุจ ุงูุจูุงูุงุช (Race Condition). ูุณุชุฎุฏู ุฃุฏูุงุช ุจุฑูุฌูุฉ ูุนุชุงุฏูุฉ ูุถูุงู ุฃู ุงูุนูููุงุช ุชุชุนุงูู ุฏูู ุฃู ุชูุณุฏ ุจูุงูุงุช ุจุนุถูุง ุงูุจุนุถ.

---

### 2๏ธโฃ ุงูุณููุงููุฑุงุช (Sรฉmaphores) โ ุงููุญูุฑ ุงูุฃุณุงุณู

ุงูุณููุงููุฑ ูู ูุชุบูุฑ ุตุญูุญ (Integer) ูุญููุ ูุง ูููู ุงููุตูู ุฅููู ุฅูุง ุนุจุฑ ุนูููุชูู ุฐุฑูุชูู (Atomiques):

#### ุงูุนูููุงุช ุงูุฃุณุงุณูุฉ:
1. **P(S) ุฃู wait(S):**
   ```c
   wait(S) {
       while (S <= 0); // ุงูุชุธุงุฑ (Busy Waiting)
       S--;
   }
   ```
   *ุชูุณูุฑ:* "ุฃุฑูุฏ ุงูุฏุฎููุ ุฅุฐุง ูุงู ุงูููุฑุฏ ูุชุงุญุงู ุณุขุฎุฐูุ ูุฅูุง ุณุฃูุชุธุฑ".
2. **V(S) ุฃู signal(S):**
   ```c
   signal(S) {
       S++;
   }
   ```
   *ุชูุณูุฑ:* "ููุฏ ุงูุชููุชุ ุงูููุฑุฏ ูุชุงุญ ุงูุขู ููุขุฎุฑูู".

#### ุฃููุงุน ุงูุณููุงููุฑุงุช:
- **Binary Semaphore:** ูููุชู (0 ุฃู 1) ููุท. ูุนูู ูุซู ุงูููู.
- **Counting Semaphore:** ูููุชู ูููู ุฃู ุชููู ุฃู ุนุฏุฏ ุทุจูุนูุ ูุณุชุฎุฏู ูุฅุฏุงุฑุฉ ููุงุฑุฏ ูุชุนุฏุฏุฉ (ูุซู ุนุฏุฏ ุงููุฑุงุณู ูู ูุงุนุฉ).

---

### 3๏ธโฃ ุงูุฅูุตุงุก ุงููุชุจุงุฏู (Mutex)

**ุงูู Mutex (Mutual Exclusion)** ูู ููุน ุฎุงุต ูู ุงูุณููุงููุฑุงุช ุงูุซูุงุฆูุฉุ ููู ูุน ููุฒุฉ ุฅุถุงููุฉ ููู **ุงูููููุฉ (Ownership)**.
- ุงูุนูููุฉ ุงูุชู ุฃูููุช ุงูู Mutex ูู ุงููุญูุฏุฉ ุงูุชู ุชููู ุงูุญู ูู ูุชุญู.
- **ุงููุฑู ุงูุฌููุฑู:** ุงูุณููุงููุฑ ูููู ุงุณุชุฎุฏุงูู ููุฅุดุงุฑุฉ (Signaling) ุจูู ุงูุนูููุงุช (ุนูููุฉ ุชูุชุญ ูุง ุฃุบููุชู ุฃุฎุฑู)ุ ุจูููุง Mutex ูุฎุตุต ุญุตุฑุงู ูุญูุงูุฉ ุงูููุทูุฉ ุงูุญุฑุฌุฉ.

| ูุฌู ุงูููุงุฑูุฉ | Mutex | Semaphore |
| :--- | :--- | :--- |
| **ุงูุบุฑุถ** | ุงูุฅูุตุงุก ุงููุชุจุงุฏู ููุท. | ุงูุชุฒุงูู ูุงูุฅุดุงุฑุฉ (Signaling). |
| **ุงูููููุฉ** | ูููู "ูุงููุงู" (ุงูุฐู ุฃุบูู ููุชุญ). | ูุง ูููู ูุงููุงู (ุฃู ุนูููุฉ ูููููุง ุนูู Signal). |
| **ุงูููู** | 0 ุฃู 1 ููุท. | ูู 0 ุฅูู N. |

---

### 4๏ธโฃ ุงููุฑุงูุจูู (Monitors) โ ุงูููููู ุงููุชูุฏู

ุธูุฑุช **ุงููุฑุงูุจูู (Monitors)** ูุญู ูุดุงูู ุงูุณููุงููุฑุงุช (ูุซู ูุณูุงู V ุฃู ุงูุฎุทุฃ ูู ุชุฑุชูุจ P/V) ุงูุชู ุชุคุฏู ูู Deadlock.

- **ุชุนุฑูู:** ูู ูููู ุจูุงูุงุช (Class/Object) ูุถูู ุฃู **ุฎูุทุงู ูุงุญุฏุงู ููุท** ููููู ุชูููุฐ ุฃู ุฏุงูุฉ ุฏุงุฎูู ูู ุฃู ูุญุธุฉ.
- **ุงูููููุงุช:**
    1. **Mutex ุถููู (Implicit):** ูุง ูุญุชุงุฌ ุงููุจุฑูุฌ ููุชุงุจุฉ Lock/Unlock ูุฏููุงู.
    2. **ูุชุบูุฑุงุช ุงูุญุงูุฉ (Condition Variables):** ูุซู `x.wait()` ู `x.signal()` ููุณูุงุญ ููุฎููุท ุจุงูุงูุชุธุงุฑ ุฏุงุฎู ุงููุฑุงูุจ ุฏูู ุชุนุทููู.

---

### 5๏ธโฃ ุฃูุซูุฉ ุชุทุจูููุฉ ูููุงุฐุฌ (Scenarios)

#### ุฃ. ูุซุงู ุงูุฌุณุฑ (The Bridge Scenario):
ุฌุณุฑ ุถูู ูุณูุญ ุจูุฑูุฑ ุณูุงุฑุฉ ูุงุญุฏุฉ ููุท ูู ุงุชุฌุงู ูุงุญุฏ.
- **ุงูุญู ุจุงูุณููุงููุฑ:**
  ```c
  Semaphore bridge = 1;
  
  Car(i) {
      wait(bridge);
      // ุนุจูุฑ ุงูุฌุณุฑ
      signal(bridge);
  }
  ```

#### ุจ. ูุซุงู ุงูููุชุฌ ูุงููุณุชููู (Producer/Consumer):
ุจุงุณุชุฎุฏุงู ุงูุณููุงููุฑุงุช ูุฅุฏุงุฑุฉ ูุฎุฒู (Buffer) ุจุญุฌู N:
```c
Semaphore mutex = 1; // ูุญูุงูุฉ ุงููุฎุฒู
Semaphore empty = N; // ุนุฏุฏ ุงูุฃูุงูู ุงููุงุฑุบุฉ
Semaphore full = 0;  // ุนุฏุฏ ุงูุนูุงุตุฑ ุงูุฌุงูุฒุฉ

Producer {
    wait(empty); // ุงูุชุธุฑ ููุงูุงู ูุงุฑุบุงู
    wait(mutex); // ุงุฏุฎู ูููุฎุฒู
    // ุฃุถู ุนูุตุฑ
    signal(mutex);
    signal(full); // ุฃุนูู ุงููุณุชููู ุจูุฌูุฏ ุนูุตุฑ
}
```

---

### 6๏ธโฃ ููุงุท ููููุฉ ููุงูุชุญุงู ๐
- **Race Condition:** ูู ุงูุญุงูุฉ ุงูุชู ุชุนุชูุฏ ูููุง ุงููุชูุฌุฉ ุนูู "ูู ูุตู ุฃููุงู".
- **Deadlock:** ูุญุฏุซ ุบุงูุจุงู ุนูุฏ ุนูุณ ุชุฑุชูุจ ุนูููุงุช `wait()` (ูุซูุงู P1 ุชุทูุจ A ุซู Bุ ู P2 ุชุทูุจ B ุซู A).
- **Starvation:** ุญุงูุฉ ุงูุชุธุงุฑ ุทููู ุฌุฏุงู ูุนูููุฉ ุจุณุจุจ ุชูุถูู ุนูููุงุช ุฃุฎุฑู ุนูููุง.

### 7๏ธโฃ ุฃุฎุทุงุก ุดุงุฆุนุฉ ุนูุฏ ุงูุทูุจุฉ โ
- ูุณูุงู ุนูููุฉ `signal(V)` ุจุนุฏ ุงูุฎุฑูุฌ ูู ุงูููุทูุฉ ุงูุญุฑุฌุฉุ ููุง ูุคุฏู ูุชููู ุงููุธุงู ุจุงููุงูู.
- ุงูุงุนุชูุงุฏ ุจุฃู `wait()` ู `signal()` ูู ุฏูุงู ุนุงุฏูุฉุ ูู ุนูููุงุช **ุฐุฑูุฉ** ูุง ูููู ููุงุทุนุชูุง.
- ุงุณุชุฎุฏุงู ุณููุงููุฑ ูุงุญุฏ ูุญู ูุดููุฉ ุชุชุทูุจ ุณููุงููุฑูู (ูุซู ุงูููุชุฌ ูุงููุณุชููู).

---

### 8๏ธโฃ ุชูุฑูู ุงูุชุญุงูู
**ุณุคุงู:** ูุฏููุง ููุฑุฏ ูุดุชุฑู ูููู ูู 3 ุนูููุงุช ุงุณุชุฎุฏุงูู ูู ููุณ ุงูููุช. ุงูุชุฑุญ ุญูุงู ุจุงุณุชุฎุฏุงู ุงูุณููุงููุฑุงุช.

**ุงูุญู:** ูุณุชุฎุฏู **Counting Semaphore** ูููุชู ุงูุงุจุชุฏุงุฆูุฉ $S = 3$. ูู ุนูููุฉ ุชุฑูุฏ ุงูุฏุฎูู ุชููุฐ `wait(S)` ูุนูุฏ ุงูุฎุฑูุฌ ุชููุฐ `signal(S)`.

</div>
